# 9장 단위 테스트

우리 분야에 테스트를 추가하려고 급하게 서두르는 와중에 많은 프로그래머들이 제대로 된 테스트 케이스를 작성해야 한다는 좀 더 미묘한 (그리고 더욱 중요한) 사실을 놓쳐버렸다

### TDD 법칙 세 가지

1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다
2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다
3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다

### 깨끗한 테스트 코드 유지하기

테스트 코드는 실제 코드 못지 않게 중요하다

- 테스트는 유연성, 유지보수성, 재사용성을 제공한다
    - 제공하는 버팀목이 바로 단위테스트이다
    - 테스트 케이스가 없으면 개발자는 변경을 주저한다

  ![Untitled](C:\Users\minHong\Downloads\Untitled.png)


### 깨끗한 테스트 코드

깨끗한 테스트 코드를 만들려면 세 가지가 필요하다

1.가독성, 2.가독성, 3.가독성

당연한 소리겠지만 잡다하고 세세한 코드를 없애고 진짜 필요한 자료 유형과 함수 만을 사용한다

BUILD - OPERATE - CHECK 패턴

GIVEN - WHEN - THEN 패턴

- 도메인에 특화된 테스트 언어 (DSL)
    - 테스트를 구현하는 당사자와 나중에 테스트를 읽어볼 독자를 도와주는 테스트 언어
    - 숙련된 개발자라면 자기 코드를 좀 더 간결하고 표현력이 풍부한 코드로 리팩터링해야 마땅하다
- 이중 표중
    - 실제 환경과 테스트 환경은 요구사항이 판이하게 다르다
    - 실제 환경에서는 절대로 안되지만 테스트 환경에서는 문제 없는 방식이 있다
    - 대개 메모리나 CPU 효율과 관련 있는 경우다
    - 코드의 깨끗함과는 철저히 무관하다


### 테스트 당 assert 하나

- 테스트 당 개념 하나
    - 테스트 함수마다 한 개념만 테스트하라

### F.I.R.S.T.

- **F(Fast) 빠르게** : 테스트는 빨리 돌아야 한다, 테스트가 느리면 자주 돌릴 엄두를 못 낸다
- **I(Independent) 독립적으로** : 각 테스트는 서로 의존하면 안된다
- **R(Repeateable) 반복가능하게** : 테스트는 어떤 환경에서도 반복 가능해야 한다
- **S(Self-Validating) 자가검증하는** : 성공 아니면 실패다
- **T(Timely) 적시에** : 단위 테스트는 테스트하려는 실제 코드를 구현하기 직전에 구현한다

### 결론

- 테스트 코드는 실제 코드만큼이나 프로젝트 건강에 중요하다